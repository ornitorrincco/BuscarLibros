<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Comparar precios de libros</title>
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/concise.min.css">
    <link rel="stylesheet" href="assets/css/concise-ui.min.css">
    <link rel="stylesheet" href="assets/css/concise-utils.min.css">
    <link rel="stylesheet" href="assets/css/app.css">
    <script type="text/javascript" src="assets/js/angular.min.js"></script>
  </head>
  <body ng-app="indexApp" ng-controller="indexController" class="_bg-background-light">
    <div class="wrapper">
      <div container class="_mts">
        <h1>Comparar precios de libros</h1>
        <form ng-submit="search()">
          <div grid class="_mbs">
            <div column="4">
              <input type="text" class="form-control" placeholder="Búsqueda" ng-model="data.search">
            </div>
            <div column="2">
              <button type="submit" class="form-control" name="button">Buscar</button>
            </div>
          </div>
        </form>
        <div class="progress-bar -striped -animated" ng-hide="done === total">
          <span class="progress" style="width: 70%"></span>
        </div>
        <div class="scrollable">
          <table class="table _mbm" ng-if="data.elements.length > 0">
            <thead>
              <th ng-click="data.orderBy = data.orderBy === 'title' ? '-title' : 'title'" class="pointer">Título
                <i ng-class="data.orderBy === 'title' ? 'fa fa-sort-asc' : data.orderBy === '-title' ? 'fa fa-sort-desc' : ''"></i>
              </th>
              <th ng-click="data.orderBy = data.orderBy === 'author' ? '-author' : 'author'" class="pointer">Autor
                <i ng-class="data.orderBy === 'author' ? 'fa fa-sort-asc' : data.orderBy === '-author' ? 'fa fa-sort-desc' : ''"></i>
              </th>
              <th ng-click="data.orderBy = data.orderBy === 'library' ? '-library' : 'library'" class="pointer">Librería
                <i ng-class="data.orderBy === 'library' ? 'fa fa-sort-asc' : data.orderBy === '-library' ? 'fa fa-sort-desc' : ''"></i>
              </th>
              <th ng-click="data.orderBy = data.orderBy === 'price' ? '-price' : 'price'" class="pointer">Precio
                <i ng-class="data.orderBy === 'price' ? 'fa fa-sort-asc' : data.orderBy === '-price' ? 'fa fa-sort-desc' : ''"></i>
              </th>
            </thead>
            <tbody>
              <tr ng-repeat="element in data.elements | orderBy:data.orderBy">
                <td class="_c-base-primary"><a target="_blank" href="{{element.site + element.reference}}">{{element.title}}</a></td>
                <td>{{element.author}}</td>
                <td>{{element.library}}</td>
                <td>{{element.price !== -1 ? element.price : '' | currency}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <script type="text/javascript" src="assets/js/app.js"></script>
  </body>
</html>
